## NMAP 高级使用技巧和漏洞扫描发现

### NMAP 高级使用技巧
```shell 
# 扫描一台服务器
nmap 192.168.1.63 
# 扫描一台机器，查看它打开的端口及详细信息
nmap -v 192.168.1.63 
#  扫描一个范围： 端口 1-65535
nmap -p 1-65535 192.168.1.63 
# nmap -sS -O xueshenit.com
nmap -sS -O xueshenit.com 
# 扫描一个网段中所有机器是什么类型的操作系统
nmap -sS -O 192.168.1.0/24 
# 查找一些有特点的 IP 地址中，开启 80 端口的服务器。
nmap -v -p 80 192.168.1.62-67
# 如何更隐藏的去扫描，频繁扫描会被屏蔽或者锁定 IP 地址。
# -randomize_hosts 随机扫描，对目标主机的顺序随机划分
# --scan-delay 延时扫描，单位秒，调整探针之间的延迟
nmap -v --randomize-hosts --scan-delay 3000ms -p 80 192.168.1.62-69
# 使用通配符指定 IP 地址
nmap -v --randomize-hosts --scan-delay 30 -p 80 1.*.2.3-8
# TCP Connect 扫描
nmap -sT 192.168.1.63 -p 80
# UDP 扫描
nmap -sU 192.168.1.63
# 端口状态解析：
# open：从目标端口得到任意的 UDP 应答  
# open|filtered：如果目标主机没有给出应答
# closed：ICMP 端口无法抵达错误
# filtered：ICMP 无法抵达错误

# 报文分段扫描
nmap -f -v 192.168.1.63
# 使用-f 选项可以对 nmap 发送的探测数据包进行分段。这样将原来的数据包分成几个部分，目标网
# 络的防御机制例如包过滤、防火墙等在对这些数据包进行检测的时候就会变得更加困难。另外必须谨慎使
# 用这个选项，一些老旧的系统在处理分段的包时经常会出现死机的情况
```

- 使用诱饵主机隐蔽扫描
```shell
#在初始的 ping 扫描（ICMP、SYN、ACK 等)阶段或真正的端口扫描，以及远程操作系统检测（-O)阶段都可以使用诱饵主机选项。但是在进行版本检测或 TCP 连接扫描时，诱饵主机选项是无效的。
#随机 3 个诱饵
nmap -D RND:3 192.168.1.63
#使用自己 IP 作为诱饵
nmap -D ME 192.168.1.63
#指定单个 IP：192.168.1.14 作为诱饵
nmap -D 192.168.1.14 192.168.1.63
#指定多个 IP 作为诱饵对 192.168.1.63 进行探测
nmap -D 192.168.1.14,192.168.1.18 192.168.1.63
```

```shell
# 伪造源端口为 8888 对目标进行扫描
nmap --source-port 8888 101.200.128.35
# or
nmap -g 8888 101.200.128.35

# 从互联网上随机选择 10 台主机扫描是否运行 Web 服务器（开放 80 端口）
nmap -v -iR 10 -p 80

# 将所有主机视为联机，跳过主机发现，这种方式可以穿透防火墙，避免被防火墙发现
nmap -Pn 101.200.128.35
```

### NESSUS 漏洞检 [下载地址](https://www.tenable.com/downloads/nessus?loginAttempted=true)

